// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Admin {
  id       Int    @id @default(autoincrement())
  username String @unique
  password String
  email    String?   @unique
  resetPasswordToken   String?   @unique
  resetPasswordExpires DateTime?
}

model Setting {
  id           Int     @id @default(1)
  brandName    String? @default("Sambal Juara")
  logoImageUrl String? @db.VarChar(255)
  qrisStaticData String? @db.Text
}

model SocialMediaLink {
  id       Int    @id @default(autoincrement())
  platform String @unique
  url      String @db.VarChar(255)
  iconName String // Contoh: "FaInstagram", "FaWhatsapp"
}


model PopupBanner {
  id        Int      @id @default(autoincrement())
  imageUrl  String   @db.VarChar(255)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
}

model Produk {
  id          Int    @id @default(autoincrement())
  name        String @unique
  level       Int
  imageUrl    String @db.VarChar(255)
  description String @db.VarChar(100)
  harga       Int
  orderItems OrderItem[]
}

model Order {
  id                Int       @id @default(autoincrement())
  serialNumber      String    @unique
  customerName      String
  customerAddress   String
  customerPhone     String
  totalAmount       Int
  shippingCost      Int
  // Status pesanan: PENDING, APPROVED, CANCELLED
  status            String    @default("PENDING")
  paymentProofUrl   String    // URL bukti pembayaran
  adminNotes        String?   // Catatan/alasan dari admin
  createdAt         DateTime  @default(now())
  orderItems        OrderItem[]
}

model OrderItem {
  id        Int    @id @default(autoincrement())
  order     Order  @relation(fields: [orderId], references: [id])
  orderId   Int
  product   Produk @relation(fields: [productId], references: [id])
  productId Int
  quantity  Int
  price     Int
}


model Testimoni {
  id     Int    @id @default(autoincrement())
  name   String
  title  String
  quote  String @db.Text
  rating Int
}